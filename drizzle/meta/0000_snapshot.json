{
  "id": "3b0a17ba-4312-4027-9d24-47fb7b8de3cb",
  "prevId": "00000000-0000-0000-0000-000000000000",
  "version": "7",
  "dialect": "postgresql",
  "tables": {
    "public.conversation_messages": {
      "name": "conversation_messages",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "session_id": {
          "name": "session_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "role": {
          "name": "role",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "content": {
          "name": "content",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "token_count": {
          "name": "token_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "conv_messages_session_idx": {
          "name": "conv_messages_session_idx",
          "columns": [
            {
              "expression": "session_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "conv_messages_created_idx": {
          "name": "conv_messages_created_idx",
          "columns": [
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "conv_messages_role_idx": {
          "name": "conv_messages_role_idx",
          "columns": [
            {
              "expression": "role",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "conversation_messages_session_id_conversation_sessions_id_fk": {
          "name": "conversation_messages_session_id_conversation_sessions_id_fk",
          "tableFrom": "conversation_messages",
          "tableTo": "conversation_sessions",
          "columnsFrom": [
            "session_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.conversation_sessions": {
      "name": "conversation_sessions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "title": {
          "name": "title",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "summary": {
          "name": "summary",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "message_count": {
          "name": "message_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "entity_count": {
          "name": "entity_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "started_at": {
          "name": "started_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "last_activity": {
          "name": "last_activity",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "ended_at": {
          "name": "ended_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "conv_sessions_started_idx": {
          "name": "conv_sessions_started_idx",
          "columns": [
            {
              "expression": "started_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "conv_sessions_last_activity_idx": {
          "name": "conv_sessions_last_activity_idx",
          "columns": [
            {
              "expression": "last_activity",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.entity_contexts": {
      "name": "entity_contexts",
      "schema": "",
      "columns": {
        "entity_id": {
          "name": "entity_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "context_id": {
          "name": "context_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "relevance_score": {
          "name": "relevance_score",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 50
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "entity_contexts_entity_idx": {
          "name": "entity_contexts_entity_idx",
          "columns": [
            {
              "expression": "entity_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "entity_contexts_context_idx": {
          "name": "entity_contexts_context_idx",
          "columns": [
            {
              "expression": "context_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "entity_contexts_entity_id_memory_entities_id_fk": {
          "name": "entity_contexts_entity_id_memory_entities_id_fk",
          "tableFrom": "entity_contexts",
          "tableTo": "memory_entities",
          "columnsFrom": [
            "entity_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "entity_contexts_context_id_memory_contexts_id_fk": {
          "name": "entity_contexts_context_id_memory_contexts_id_fk",
          "tableFrom": "entity_contexts",
          "tableTo": "memory_contexts",
          "columnsFrom": [
            "context_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {
        "entity_contexts_entity_id_context_id_pk": {
          "name": "entity_contexts_entity_id_context_id_pk",
          "columns": [
            "entity_id",
            "context_id"
          ]
        }
      },
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.entity_mentions": {
      "name": "entity_mentions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "entity_id": {
          "name": "entity_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "message_id": {
          "name": "message_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "session_id": {
          "name": "session_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "mention_context": {
          "name": "mention_context",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "entity_mentions_entity_idx": {
          "name": "entity_mentions_entity_idx",
          "columns": [
            {
              "expression": "entity_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "entity_mentions_message_idx": {
          "name": "entity_mentions_message_idx",
          "columns": [
            {
              "expression": "message_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "entity_mentions_session_idx": {
          "name": "entity_mentions_session_idx",
          "columns": [
            {
              "expression": "session_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "entity_mentions_created_idx": {
          "name": "entity_mentions_created_idx",
          "columns": [
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "entity_mentions_entity_id_memory_entities_id_fk": {
          "name": "entity_mentions_entity_id_memory_entities_id_fk",
          "tableFrom": "entity_mentions",
          "tableTo": "memory_entities",
          "columnsFrom": [
            "entity_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "entity_mentions_message_id_conversation_messages_id_fk": {
          "name": "entity_mentions_message_id_conversation_messages_id_fk",
          "tableFrom": "entity_mentions",
          "tableTo": "conversation_messages",
          "columnsFrom": [
            "message_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "entity_mentions_session_id_conversation_sessions_id_fk": {
          "name": "entity_mentions_session_id_conversation_sessions_id_fk",
          "tableFrom": "entity_mentions",
          "tableTo": "conversation_sessions",
          "columnsFrom": [
            "session_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.entity_relationships": {
      "name": "entity_relationships",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "from_entity_id": {
          "name": "from_entity_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "to_entity_id": {
          "name": "to_entity_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "relationship_type": {
          "name": "relationship_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "strength": {
          "name": "strength",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "entity_rel_from_idx": {
          "name": "entity_rel_from_idx",
          "columns": [
            {
              "expression": "from_entity_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "entity_rel_to_idx": {
          "name": "entity_rel_to_idx",
          "columns": [
            {
              "expression": "to_entity_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "entity_rel_type_idx": {
          "name": "entity_rel_type_idx",
          "columns": [
            {
              "expression": "relationship_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "entity_relationships_from_entity_id_memory_entities_id_fk": {
          "name": "entity_relationships_from_entity_id_memory_entities_id_fk",
          "tableFrom": "entity_relationships",
          "tableTo": "memory_entities",
          "columnsFrom": [
            "from_entity_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "entity_relationships_to_entity_id_memory_entities_id_fk": {
          "name": "entity_relationships_to_entity_id_memory_entities_id_fk",
          "tableFrom": "entity_relationships",
          "tableTo": "memory_entities",
          "columnsFrom": [
            "to_entity_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.memory_blocks": {
      "name": "memory_blocks",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "block_type": {
          "name": "block_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "label": {
          "name": "label",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "value": {
          "name": "value",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "char_limit": {
          "name": "char_limit",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 500
        },
        "priority": {
          "name": "priority",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "token_cost": {
          "name": "token_cost",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "generated": {
            "as": "CEIL(LENGTH(\"memory_blocks\".\"value\")::NUMERIC / 4)",
            "type": "stored"
          }
        },
        "inclusion_priority": {
          "name": "inclusion_priority",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 50
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "last_accessed": {
          "name": "last_accessed",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "memory_blocks_type_idx": {
          "name": "memory_blocks_type_idx",
          "columns": [
            {
              "expression": "block_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "memory_blocks_priority_idx": {
          "name": "memory_blocks_priority_idx",
          "columns": [
            {
              "expression": "priority",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "memory_blocks_updated_idx": {
          "name": "memory_blocks_updated_idx",
          "columns": [
            {
              "expression": "updated_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "memory_blocks_inclusion_idx": {
          "name": "memory_blocks_inclusion_idx",
          "columns": [
            {
              "expression": "inclusion_priority",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.memory_budget_logs": {
      "name": "memory_budget_logs",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "session_id": {
          "name": "session_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "total_tokens_available": {
          "name": "total_tokens_available",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "tokens_used": {
          "name": "tokens_used",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "memories_included": {
          "name": "memories_included",
          "type": "uuid[]",
          "primaryKey": false,
          "notNull": true,
          "default": "'{}'"
        },
        "memories_excluded": {
          "name": "memories_excluded",
          "type": "uuid[]",
          "primaryKey": false,
          "notNull": true,
          "default": "'{}'"
        },
        "timestamp": {
          "name": "timestamp",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "budget_logs_session_idx": {
          "name": "budget_logs_session_idx",
          "columns": [
            {
              "expression": "session_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "budget_logs_timestamp_idx": {
          "name": "budget_logs_timestamp_idx",
          "columns": [
            {
              "expression": "timestamp",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "memory_budget_logs_session_id_conversation_sessions_id_fk": {
          "name": "memory_budget_logs_session_id_conversation_sessions_id_fk",
          "tableFrom": "memory_budget_logs",
          "tableTo": "conversation_sessions",
          "columnsFrom": [
            "session_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.memory_conflicts": {
      "name": "memory_conflicts",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "entity_a_id": {
          "name": "entity_a_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "entity_b_id": {
          "name": "entity_b_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "conflict_type": {
          "name": "conflict_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "resolution_status": {
          "name": "resolution_status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'pending'"
        },
        "resolution_entity_id": {
          "name": "resolution_entity_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "resolution_strategy": {
          "name": "resolution_strategy",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "detected_at": {
          "name": "detected_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "resolved_at": {
          "name": "resolved_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "conflicts_status_idx": {
          "name": "conflicts_status_idx",
          "columns": [
            {
              "expression": "resolution_status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "conflicts_type_idx": {
          "name": "conflicts_type_idx",
          "columns": [
            {
              "expression": "conflict_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "memory_conflicts_entity_a_id_memory_entities_id_fk": {
          "name": "memory_conflicts_entity_a_id_memory_entities_id_fk",
          "tableFrom": "memory_conflicts",
          "tableTo": "memory_entities",
          "columnsFrom": [
            "entity_a_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "memory_conflicts_entity_b_id_memory_entities_id_fk": {
          "name": "memory_conflicts_entity_b_id_memory_entities_id_fk",
          "tableFrom": "memory_conflicts",
          "tableTo": "memory_entities",
          "columnsFrom": [
            "entity_b_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "memory_conflicts_resolution_entity_id_memory_entities_id_fk": {
          "name": "memory_conflicts_resolution_entity_id_memory_entities_id_fk",
          "tableFrom": "memory_conflicts",
          "tableTo": "memory_entities",
          "columnsFrom": [
            "resolution_entity_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.memory_consolidations": {
      "name": "memory_consolidations",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "consolidation_type": {
          "name": "consolidation_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "source_entity_ids": {
          "name": "source_entity_ids",
          "type": "uuid[]",
          "primaryKey": false,
          "notNull": true
        },
        "target_entity_id": {
          "name": "target_entity_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "reason": {
          "name": "reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "confidence": {
          "name": "confidence",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 50
        },
        "consolidated_at": {
          "name": "consolidated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "consolidated_by": {
          "name": "consolidated_by",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'system'"
        }
      },
      "indexes": {
        "consolidations_target_idx": {
          "name": "consolidations_target_idx",
          "columns": [
            {
              "expression": "target_entity_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "consolidations_type_idx": {
          "name": "consolidations_type_idx",
          "columns": [
            {
              "expression": "consolidation_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "memory_consolidations_target_entity_id_memory_entities_id_fk": {
          "name": "memory_consolidations_target_entity_id_memory_entities_id_fk",
          "tableFrom": "memory_consolidations",
          "tableTo": "memory_entities",
          "columnsFrom": [
            "target_entity_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.memory_contexts": {
      "name": "memory_contexts",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "parent_context_id": {
          "name": "parent_context_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "active": {
          "name": "active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "color": {
          "name": "color",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "contexts_name_idx": {
          "name": "contexts_name_idx",
          "columns": [
            {
              "expression": "name",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "contexts_parent_idx": {
          "name": "contexts_parent_idx",
          "columns": [
            {
              "expression": "parent_context_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "memory_contexts_parent_context_id_memory_contexts_id_fk": {
          "name": "memory_contexts_parent_context_id_memory_contexts_id_fk",
          "tableFrom": "memory_contexts",
          "tableTo": "memory_contexts",
          "columnsFrom": [
            "parent_context_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "memory_contexts_name_unique": {
          "name": "memory_contexts_name_unique",
          "nullsNotDistinct": false,
          "columns": [
            "name"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.memory_entities": {
      "name": "memory_entities",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "category": {
          "name": "category",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "tags": {
          "name": "tags",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true,
          "default": "'{}'"
        },
        "confidence": {
          "name": "confidence",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 100
        },
        "source_type": {
          "name": "source_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "source_session_id": {
          "name": "source_session_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "source_message_id": {
          "name": "source_message_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "mention_count": {
          "name": "mention_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "last_mentioned": {
          "name": "last_mentioned",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "importance_score": {
          "name": "importance_score",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 50
        },
        "memory_tier": {
          "name": "memory_tier",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'short_term'"
        },
        "access_count": {
          "name": "access_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "last_accessed": {
          "name": "last_accessed",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": false
        },
        "promotion_score": {
          "name": "promotion_score",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "decay_rate": {
          "name": "decay_rate",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 10
        },
        "last_reinforced": {
          "name": "last_reinforced",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "current_strength": {
          "name": "current_strength",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 100
        },
        "memory_type": {
          "name": "memory_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'semantic'"
        },
        "token_cost": {
          "name": "token_cost",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "generated": {
            "as": "CEIL(LENGTH(\"memory_entities\".\"name\" || ' ' || \"memory_entities\".\"description\")::NUMERIC / 4)",
            "type": "stored"
          }
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "memory_entities_category_idx": {
          "name": "memory_entities_category_idx",
          "columns": [
            {
              "expression": "category",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "memory_entities_tags_idx": {
          "name": "memory_entities_tags_idx",
          "columns": [
            {
              "expression": "tags",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "memory_entities_mention_count_idx": {
          "name": "memory_entities_mention_count_idx",
          "columns": [
            {
              "expression": "mention_count",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "memory_entities_last_mentioned_idx": {
          "name": "memory_entities_last_mentioned_idx",
          "columns": [
            {
              "expression": "last_mentioned",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "memory_entities_importance_idx": {
          "name": "memory_entities_importance_idx",
          "columns": [
            {
              "expression": "importance_score",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "memory_entities_name_idx": {
          "name": "memory_entities_name_idx",
          "columns": [
            {
              "expression": "name",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "memory_entities_tier_idx": {
          "name": "memory_entities_tier_idx",
          "columns": [
            {
              "expression": "memory_tier",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "memory_entities_access_count_idx": {
          "name": "memory_entities_access_count_idx",
          "columns": [
            {
              "expression": "access_count",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "memory_entities_last_accessed_idx": {
          "name": "memory_entities_last_accessed_idx",
          "columns": [
            {
              "expression": "last_accessed",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "memory_entities_strength_idx": {
          "name": "memory_entities_strength_idx",
          "columns": [
            {
              "expression": "current_strength",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "memory_entities_type_idx": {
          "name": "memory_entities_type_idx",
          "columns": [
            {
              "expression": "memory_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.memory_episodes": {
      "name": "memory_episodes",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "session_id": {
          "name": "session_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "event_type": {
          "name": "event_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "content": {
          "name": "content",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "related_entity_ids": {
          "name": "related_entity_ids",
          "type": "uuid[]",
          "primaryKey": false,
          "notNull": true,
          "default": "'{}'"
        },
        "temporal_order": {
          "name": "temporal_order",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "emotional_context": {
          "name": "emotional_context",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "episodes_session_idx": {
          "name": "episodes_session_idx",
          "columns": [
            {
              "expression": "session_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "episodes_temporal_idx": {
          "name": "episodes_temporal_idx",
          "columns": [
            {
              "expression": "temporal_order",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "episodes_type_idx": {
          "name": "episodes_type_idx",
          "columns": [
            {
              "expression": "event_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "memory_episodes_session_id_conversation_sessions_id_fk": {
          "name": "memory_episodes_session_id_conversation_sessions_id_fk",
          "tableFrom": "memory_episodes",
          "tableTo": "conversation_sessions",
          "columnsFrom": [
            "session_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.memory_retrieval_logs": {
      "name": "memory_retrieval_logs",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "session_id": {
          "name": "session_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "query_text": {
          "name": "query_text",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "query_type": {
          "name": "query_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "retrieved_entity_ids": {
          "name": "retrieved_entity_ids",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "retrieval_scores": {
          "name": "retrieval_scores",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "retrieval_time_ms": {
          "name": "retrieval_time_ms",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "result_count": {
          "name": "result_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "memory_retrieval_session_idx": {
          "name": "memory_retrieval_session_idx",
          "columns": [
            {
              "expression": "session_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "memory_retrieval_created_idx": {
          "name": "memory_retrieval_created_idx",
          "columns": [
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "memory_retrieval_logs_session_id_conversation_sessions_id_fk": {
          "name": "memory_retrieval_logs_session_id_conversation_sessions_id_fk",
          "tableFrom": "memory_retrieval_logs",
          "tableTo": "conversation_sessions",
          "columnsFrom": [
            "session_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.memory_triggers": {
      "name": "memory_triggers",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "entity_id": {
          "name": "entity_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "trigger_type": {
          "name": "trigger_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "trigger_value": {
          "name": "trigger_value",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "strength": {
          "name": "strength",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 50
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "triggers_entity_idx": {
          "name": "triggers_entity_idx",
          "columns": [
            {
              "expression": "entity_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "triggers_type_idx": {
          "name": "triggers_type_idx",
          "columns": [
            {
              "expression": "trigger_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "triggers_value_idx": {
          "name": "triggers_value_idx",
          "columns": [
            {
              "expression": "trigger_value",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "memory_triggers_entity_id_memory_entities_id_fk": {
          "name": "memory_triggers_entity_id_memory_entities_id_fk",
          "tableFrom": "memory_triggers",
          "tableTo": "memory_entities",
          "columnsFrom": [
            "entity_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    }
  },
  "enums": {},
  "schemas": {},
  "sequences": {},
  "roles": {},
  "policies": {},
  "views": {},
  "_meta": {
    "columns": {},
    "schemas": {},
    "tables": {}
  }
}